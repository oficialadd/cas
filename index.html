<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Redirigiendo a WhatsApp...</title>

  <script>
    // Lista de números posibles
    const numeros = [
      "5493518080905",
      "5493518081036",
      "5493515141625"
    ];

    // Selección aleatoria de uno
    const elegido = numeros[Math.floor(Math.random() * numeros.length)];

    // Código de origen (este es el identificador de este script)
    const origen = "1";

    // Generar código aleatorio de 5 dígitos
    const codigoTracking = Math.floor(10000 + Math.random() * 90000);

    // Mensaje con el código
    const mensaje = encodeURIComponent(
      `¡Hola! Me interesa cargar fichas en Cashboom Casino. Código: ${codigoTracking}`
    );

    // User-Agent y Referer para registro adicional (opcional)
    const userAgent = navigator.userAgent;
    const referer = document.referrer;

    // 📌 REEMPLAZÁ esta URL con la de tu Google Apps Script
    const scriptURL = "https://script.google.com/macros/s/AKfycby1XPYQuR63kzXfbsnbH8b5VDCUMzX_p7Es9cxBc_NDckwbN2gWzA6ffdrprMWMltaG/exec";

    // Armar la URL para registrar
    const urlRegistro = `${scriptURL}?codigo=${codigoTracking}&origen=${origen}&numero=${encodeURIComponent(elegido)}&ua=${encodeURIComponent(userAgent)}&ref=${encodeURIComponent(referer)}`;

    // Guardar registro y redirigir
    fetch(urlRegistro)
      .then(() => {
        const urlWhatsApp = `https://wa.me/${elegido}?text=${mensaje}`;
        window.location.href = urlWhatsApp;
      })
      .catch(() => {
        // Igual redirigimos aunque falle el registro
        const urlWhatsApp = `https://wa.me/${elegido}?text=${mensaje}`;
        window.location.href = urlWhatsApp;
      });
  </script>
</head>
<body>
  <div style="text-align:center; font-family:sans-serif; margin-top:100px;">
    <h3>Conectando con un asesor por WhatsApp...</h3>
    <p>Por favor, no cierres esta ventana.</p>
  </div>
</body>
</html>
